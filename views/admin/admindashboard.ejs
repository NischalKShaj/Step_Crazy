<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Step-Crazy/Admindashboard</title>
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8sh+WyFRRUQRiq+2LlGy+8iH2p1u7L8pvpOp"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Datepicker CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
      integrity="sha384-qsiIhV3amE01/WhFQEdeQ4sez3Sf5sU9MqEtJ0F6zOn1MCpYsrqHjDVUpnPZ0Ga"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="../../CSS/admin/style.css" />
    <link rel="stylesheet" href="../.../CSS/admin/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Datepicker CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
      integrity="sha384-qsiIhV3amE01/WhFQEdeQ4sez3Sf5sU9MqEtJ0F6zOn1MCpYsrqHjDVUpnPZ0Ga"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/css/bootstrap-utilities.rtl.min.css"
      integrity="sha512-g/9zc34RrAHk9cSFEodVsDR+TjDAhw9+VjWHnbK6kZe6sK4xTpPJ6cqJYd3WXfFmQuNLIkhDetQdm6fOOzj/nQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <style>
    .dimmed-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5); /* Adjust the opacity as needed */
      display: none;
      z-index: 999;
    }

    .loader {
      border: 8px solid #f3f3f3; /* Light gray */
      border-top: 8px solid #3498db; /* Blue */
      border-radius: 50%;
      width: 40px;
      height: 40px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      display: none;
      animation: spin 2s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  </style>
  <body>
    <div class="dimmed-background" id="dimmedBackground"></div>
    <div class="loader" id="loader"></div>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="/admin/dashboard">
          <img
            src="../../Img/product/logo.png"
            alt="logo"
            class="img-fluid w-25"
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav ml-auto">
            <a class="nav-link" href="/admin/dashboard">Dashboard</a>
            <a class="nav-link" href="/admin/dashboard/admins">Admins</a>
            <a class="nav-link" href="/admin/dashboard/user">Users</a>
            <a class="nav-link" href="/admin/dashboard/product">Product</a>
            <a class="nav-link" href="/admin/dashboard/category">Category</a>
            <a class="nav-link" href="/admin/dashboard/coupon">Coupons</a>
            <a class="nav-link" href="/admin/dashboard/offer">Offers</a>
            <a class="nav-link" href="/admin/dashboard/banner">Banner</a>
            <a href="/admin/logout">
              <button class="btn btn-danger">
                <i class="fas fa-sign-out-alt"></i> Logout
              </button>
            </a>
          </div>
        </div>
      </div>
    </nav>
    <div
      style="
        background-color: #007bff;
        color: #ffffff;
        padding: 20px;
        text-align: center;
      "
    >
      <h1 style="font-size: 2em; margin: 0">Admin Control Center</h1>
    </div>

    <div class="container-fluid">
      <!-- Dropdown for selecting the report type -->
      <div class="row mt-3">
        <div class="form-group col-auto">
          <label for="reportSelector" class="col-form-label"
            >Select Report Type:</label
          >
          <div class="input-group">
            <select
              id="reportSelector"
              class="form-control form-control-sm bg-primary"
            >
              <option value="bar-chart-daily">Daily Sales Report</option>
              <option value="bar-chart">Monthly Sales Report</option>
              <option value="bar-chart-yearly">Yearly Sales Report</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <!-- Container to display the card-based graphs -->
        <div id="graphContainer" class="col-md-6">
          <!-- Daily Sales Report -->
          <div
            class="card"
            id="card-bar-chart-daily"
            style="display: none; height: 550px"
          >
            <div class="card-body bg-light rounded h-100 p-4">
              <h6 class="card-title mb-4">Daily Sales Report</h6>
              <canvas
                id="bar-chart-daily"
                data-daily-counts="<%= JSON.stringify(dailyCounts) %>"
                style="height: 100%; width: 100%"
              ></canvas>
            </div>
          </div>

          <!-- Monthly Sales Report -->
          <div
            class="card"
            id="card-bar-chart"
            style="display: none; height: 550px"
          >
            <div class="card-body bg-light rounded h-100 p-4">
              <h6 class="card-title mb-4">Monthly Sales Report</h6>
              <canvas
                id="bar-chart"
                data-months="<%= JSON.stringify(months) %>"
                data-counts="<%= JSON.stringify(counts) %>"
                style="height: 100%; width: 100%"
              ></canvas>
            </div>
          </div>

          <!-- Yearly Sales Report -->
          <div
            class="card"
            id="card-bar-chart-yearly"
            style="display: none; height: 550px"
          >
            <div class="card-body bg-light rounded h-100 p-4">
              <h6 class="card-title mb-4">Yearly Sales Report</h6>
              <canvas
                id="bar-chart-yearly"
                data-years="<%= JSON.stringify(years) %>"
                data-yearly-counts="<%= JSON.stringify(count) %>"
                style="height: 100%; width: 100%"
              ></canvas>
            </div>
          </div>
        </div>

        <!-- Additional card-based graph on the right side -->
        <div class="col-md-6" style="margin-bottom: 20px;">
          <div class="card" id="card-bar-chart-stock" style="height: 550px">
            <div class="card-body bg-light rounded h-100 p-4">
              <h6 class="card-title mb-4">Total Stocks Report</h6>
              <canvas
                id="bar-chart-stock"
                data-product-names="<%= JSON.stringify(productNames) %>"
                data-stock-values="<%= JSON.stringify(stockValues) %>"
                style="height: 100%; width: 100%"
              ></canvas>
            </div>
          </div>
        </div>
        
        <!-- Graph for showing the total sales report -->
        <div class="col-md-6" style="margin-bottom: 20px;">
          <div class="card" id="card-bar-chart-sales" style="height: 550px">
            <div class="card-body bg-light rounded h-100 p-4">
              <h6 class="card-title mb-4">Total Sales Report</h6>
              <canvas id="bar-chart-sales" data-total-sales="<%= JSON.stringify(totalSales) %>" style="height: 100%; width: 100%"></canvas>
            </div>
          </div>
        </div>
        
        <div class="col-md-6" style="margin-bottom: 20px;">
          <div class="card" id="card-bar-chart-users" style="height: 550px">
            <div class="card-body bg-light rounded h-100 p-4">
              <h6 class="card-title mb-4">Total Users Report</h6>
              <canvas id="bar-chart-users" data-total-users="<%= JSON.stringify(totalUsers) %>" style="height: 100%; width: 100%"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Stoke of the products -->

    <div class="container-fluid">
      <div class="row mt-3">
        <div class="col-sm-12 col-xl-6 mb-4">
          <div class="bg-light rounded h-100 p-4">
            <h6 class="mb-4">Sales Report</h6>

            <!-- Sales Report Dropdown -->
            <div class="card mb-4">
              <div class="card-body">
                <h6 class="card-title">Select Report Type:</h6>
                <div class="button-group">
                  <select class="form-control" id="salesReportDropdown">
                    <option value="yearly">Yearly</option>
                    <option value="monthly">Monthly</option>
                    <option value="daily">Daily</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Yearly Sales Report -->
            <div class="card mb-4" id="yearlyReport" style="display: none">
              <div class="card-body">
                <h6 class="card-title">Yearly</h6>
                <div class="button-group">
                  <select class="form-control" id="year">
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                    <option value="2028">2028</option>
                    <option value="2029">2029</option>
                  </select>
                  <button id="downloadPdfBtn" class="btn btn-primary">
                    Download PDF
                  </button>
                  <button id="downloadXLSBtn" class="btn btn-success">
                    Download Excel
                  </button>
                </div>
              </div>
            </div>

            <!-- Monthly Sales Report -->
            <div class="card mb-4" id="monthlyReport" style="display: none">
              <div class="card-body">
                <h6 class="card-title">Monthly</h6>
                <div class="button-group">
                  <select class="form-control" id="month">
                    <option value="January">January</option>
                    <option value="February">February</option>
                    <option value="March">March</option>
                    <option value="April">April</option>
                    <option value="May">May</option>
                    <option value="June">June</option>
                    <option value="July">July</option>
                    <option value="August">August</option>
                    <option value="September">September</option>
                    <option value="October">October</option>
                    <option value="November">November</option>
                    <option value="December">December</option>
                  </select>
                  <button id="downloadPdfBtnMonth" class="btn btn-primary">
                    Download PDF
                  </button>
                  <button id="downloadXLSBtnMonth" class="btn btn-success">
                    Download Excel
                  </button>
                </div>
              </div>
            </div>

            <!-- Daily Sales Report -->
            <div class="card" id="dailyReport" style="display: none">
              <div class="card-body">
                <h6 class="card-title">Daily</h6>
                <div class="button-group">
                  <input
                    type="text"
                    id="date"
                    class="form-control"
                    name="search"
                    placeholder="yyyy-mm-dd"
                    pattern="\d{4}-\d{2}-\d{2}"
                    title="Please use the yyyy-mm-dd format"
                    required
                  />
                  <button id="downloadPdfBtnDate" class="btn btn-primary">
                    Download PDF
                  </button>
                  <button id="downloadXLSBtnDate" class="btn btn-success">
                    Download Excel
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-xl-6">
          <div class="bg-light rounded h-100 p-4">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Stock</h6>
                <div class="button-group">
                  <a href="/admin/stockReportPDF"
                    ><button id="downloadPdfBtnStock" class="btn btn-primary">
                      Download PDF
                    </button></a
                  >
                  <a href="/admin/stockReportXLS"
                    ><button id="downloadXLSBtnStock" class="btn btn-success">
                      Download Excel
                    </button></a
                  >
                </div>
              </div>
              <div class="card-body">
                <h6 class="card-title">Total Sales</h6>
                <div class="button-group">
                  <a href="/admin/salesReportPDF"
                    ><button id="downloadPdfBtnSales" class="btn btn-primary">
                      Download PDF
                    </button></a
                  >
                  <a href="/admin/salesReportXLS"
                    ><button id="downloadXLSBtnSales" class="btn btn-success">
                      Download Excel
                    </button></a
                  >
                </div>
              </div>
              <div class="card-body">
                <h6 class="card-title">Total Users</h6>
                <div class="button-group">
                  <a href="/admin/userReportPDF"
                    ><button id="downloadPdfBtnUser" class="btn btn-primary">
                      Download PDF
                    </button></a
                  >
                  <a href="/admin/userReportXLS"
                    ><button id="downloadXLSBtnUser" class="btn btn-success">
                      Download Excel
                    </button></a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha512-X/YkDZyjTf4wyc2Vy16YGCPHwAY8rZJY+POgokZjQB2mhIRFJCckEGc6YyX9eNsPfn0PzThEuNs+uaomE5CO6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <!-- Bootstrap Datepicker JS -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"
      integrity="sha384-ssG6/A6dh4lYYjLlU0Jn5J45po4QhHUrGsJn9PHzzIePl/DI8NOgs2h8el00oew1"
      crossorigin="anonymous"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="../../js/chart.min.js"></script>
    <script>
      src =
        "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/js/bootstrap.bundle.min.js";
      integrity =
        "sha512-X/YkDZyjTf4wyc2Vy16YGCPHwAY8rZJY+POgokZjQB2mhIRFJCckEGc6YyX9eNsPfn0PzThEuNs+uaomE5CO6A==";
      crossorigin = "anonymous";
      referrerpolicy = "no-referrer";
    </script>

    <script>
      const Logout = document.getElementById("logout");

      Logout.addEventListener("click", () => {
        fetch("/admin/logout", {
          method: "post",
        })
          .then((response) => {
            if (response.ok) {
              window.location.href = "/admin";
              console.log("The admin is successfully logged out");
            } else {
              console.log("Admin not properly logged out");
            }
          })
          .catch((error) => {
            console.error("Network error", error);
          });
      });
    </script>

    <!-- sript for showing the dropdown -->
    <script>
      $(document).ready(function () {
        // Initial page load
        updateGraph($("#reportSelector").val());

        // Handle dropdown change event
        $("#reportSelector").change(function () {
          var selectedReport = $(this).val();
          updateGraph(selectedReport);
        });

        // Function to update the graph based on the selected option
        function updateGraph(selectedReport) {
          // Hide all card-based graphs
          $("#graphContainer .card").hide();

          // Show the selected card-based graph
          $("#card-" + selectedReport).show();
        }

        // Show the Total Stocks Report graph by default
        $("#card-bar-chart-stock").show();
      });
    </script>

    <script>
      document
        .getElementById("salesReportDropdown")
        .addEventListener("change", function () {
          var selectedValue = this.value;
          document.getElementById("yearlyReport").style.display =
            selectedValue === "yearly" ? "block" : "none";
          document.getElementById("monthlyReport").style.display =
            selectedValue === "monthly" ? "block" : "none";
          document.getElementById("dailyReport").style.display =
            selectedValue === "daily" ? "block" : "none";
        });
    </script>

    <!-- script for showing the total number of sales -->
    <script>
      // Retrieve the data from the attribute
      const canvasSales = document.getElementById('bar-chart-sales');
      const totalSales = JSON.parse(canvasSales.getAttribute("data-total-sales"));
    
      // Create the chart
      const sales = {
        labels: ['Total Sales'],  // You can customize the label as needed
        datasets: [
          {
            label: 'Total Sales',
            data: [totalSales],  // Ensure totalSales is an array, even if it's a single value
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1,
            barPercentage: 0.125,
          },
        ],
      };
    
      // Configuration option for the total sales bar chart
      const optionsSales = {
        scales: {
          y: {
            beginAtZero: true,
            max: Math.max(totalSales * 2),  // Adjust the multiplier as needed
          },
        },
      };
    
      // Get the canvas element for showing the graph
      const ctxSales = canvasSales.getContext("2d");
    
      // Create the sales bar chart
      new Chart(ctxSales, {
        type: "bar",
        data: sales,
        options: optionsSales,
      });
    </script>
    
    <!-- script for showing the total number of users -->
    <script>
      // Retrieve the data from the attribute
      const canvasUsers = document.getElementById('bar-chart-users');
      const totalUsers = JSON.parse(canvasUsers.getAttribute("data-total-users"));
    
      // Create the chart
      const user = {
        labels: ['Total Users'],  // You can customize the label as needed
        datasets: [
          {
            label: 'Total Users',
            data: [totalUsers],  // Ensure totalSales is an array, even if it's a single value
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1,
            barPercentage: 0.125,
          },
        ],
      };
    
      // Configuration option for the total sales bar chart
      const optionsUsers = {
        scales: {
          y: {
            beginAtZero: true,
            max: Math.max(totalUsers * 2),  // Adjust the multiplier as needed
          },
        },
      };
    
      // Get the canvas element for showing the graph
      const ctxUsers = canvasUsers.getContext("2d");
    
      // Create the sales bar chart
      new Chart(ctxUsers, {
        type: "bar",
        data: user,
        options: optionsUsers,
      });
    </script>
  

    <!-- script for monthly sales -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const canvas = document.getElementById("bar-chart");
        const months = JSON.parse(canvas.getAttribute("data-months"));
        const counts = JSON.parse(canvas.getAttribute("data-counts"));

        // Data for the Bar Chart
        var data = {
          labels: [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December",
          ],
          datasets: [
            {
              label: "Monthly Report",
              data: Array(12).fill(0), // Initialize an array with zeros for all months
              backgroundColor: "rgba(75, 192, 192, 0.2)",
              borderColor: "rgba(75, 192, 192, 1)",
              borderWidth: 1,
              barPercentage: 0.5,
            },
          ],
        };

        // Update the data with actual counts for each month
        months.forEach((month, index) => {
          const monthIndex = data.labels.indexOf(month);
          if (monthIndex !== -1) {
            data.datasets[0].data[monthIndex] = counts[index];
          }
        });

        // Configuration options
        var options = {
          scales: {
            y: {
              beginAtZero: true,
              max: Math.max(...counts) * 2, // Set the maximum value of the y-axis
            },
          },
        };

        // Get the canvas element
        var ctx = canvas.getContext("2d");

        // Create the Bar Chart
        var barChart = new Chart(ctx, {
          type: "bar",
          data: data,
          options: options,
        });
      });
    </script>

    <!-- script for yearly sales -->

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const canvasYearly = document.getElementById("bar-chart-yearly");
        const years = JSON.parse(canvasYearly.getAttribute("data-years"));
        const yearlyCounts = JSON.parse(
          canvasYearly.getAttribute("data-yearly-counts")
        );

        // Predefined array of years
        const allYears = [2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029];

        // Data for the Yearly Bar Chart
        var dataYearly = {
          labels: allYears.map(String), // Convert years to strings
          datasets: [
            {
              label: "Yearly Report",
              data: allYears.map(
                (year) => yearlyCounts[years.indexOf(year)] || 0
              ), // Match the counts to the predefined years
              backgroundColor: "rgba(75, 192, 192, 0.2)",
              borderColor: "rgba(75, 192, 192, 1)",
              borderWidth: 1,
              barPercentage: 0.5,
            },
          ],
        };

        // Configuration options for Yearly Bar Chart
        var optionsYearly = {
          scales: {
            y: {
              beginAtZero: true,
              max: Math.max(...yearlyCounts) * 2,
            },
          },
        };

        // Get the canvas element for Yearly Bar Chart
        var ctxYearly = canvasYearly.getContext("2d");

        // Create the Yearly Bar Chart
        var barChartYearly = new Chart(ctxYearly, {
          type: "bar",
          data: dataYearly,
          options: optionsYearly,
        });
      });
    </script>

    <!-- script for showing the Daily status -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const canvasDaily = document.getElementById("bar-chart-daily");
        const dailyCounts = JSON.parse(
          canvasDaily.getAttribute("data-daily-counts")
        );

        // Convert the labels to dates and sort them
        const sortedLabels = dailyCounts.labels
          .map((label) => new Date(label))
          .sort((a, b) => a - b);

        // Data for the Daily Bar Chart
        var dataDaily = {
          labels: sortedLabels.map((date) => date.toISOString().split("T")[0]), // Format dates as needed
          datasets: [
            {
              label: "Daily Report",
              data: dailyCounts.data,
              backgroundColor: "rgba(75, 192, 192, 0.2)",
              borderColor: "rgba(75, 192, 192, 1)",
              borderWidth: 1,
              barPercentage: 0.5,
            },
          ],
        };

        // Configuration options for Daily Bar Chart
        var optionsDaily = {
          scales: {
            y: {
              beginAtZero: true,
              max: Math.max(...dailyCounts.data) * 2,
            },
          },
        };

        // Get the canvas element for Daily Bar Chart
        var ctxDaily = canvasDaily.getContext("2d");

        // Create the Daily Bar Chart
        var barChartDaily = new Chart(ctxDaily, {
          type: "bar",
          data: dataDaily,
          options: optionsDaily,
        });
      });
    </script>

    <!-- script for showing the products stock  -->

    <script>
      // Retrieve data attributes using DOM
      const canvasStock = document.getElementById("bar-chart-stock");
      const productNames = JSON.parse(
        canvasStock.getAttribute("data-product-names")
      );
      const stockValues = JSON.parse(
        canvasStock.getAttribute("data-stock-values")
      );

      // Data for the Product Stock Bar Chart
      const dataStock = {
        labels: productNames,
        datasets: [
          {
            label: "Stock",
            data: stockValues,
            backgroundColor: "rgba(75, 192, 192, 0.2)",
            borderColor: "rgba(75, 192, 192, 1)",
            borderWidth: 1,
            barPercentage: 0.5,
          },
        ],
      };

      // Configuration options for Product Stock Bar Chart
      const optionsStock = {
        scales: {
          y: {
            beginAtZero: true,
            max: Math.max(...stockValues) * 2,
          },
        },
      };

      // Get the canvas element for Product Stock Bar Chart
      const ctxStock = canvasStock.getContext("2d");

      // Create the Product Stock Bar Chart
      new Chart(ctxStock, {
        type: "bar",
        data: dataStock,
        options: optionsStock,
      });
    </script>

    <!-- script for downloading the data according to the year -->
    <script>
      // for downloading the pdf
      document
        .getElementById("downloadPdfBtn")
        .addEventListener("click", function () {
          var selectedYear = document.getElementById("year").value;
          var pdfUrl = "/admin/yearlyReportPDF?year=" + selectedYear;
          window.location.href = pdfUrl;
        });

      // downloading the excel sheet
      document
        .getElementById("downloadXLSBtn")
        .addEventListener("click", function () {
          var selectedYear = document.getElementById("year").value;
          var xlsUrl = "/admin/yearlyReportXLS?year=" + selectedYear;
          window.location.href = xlsUrl;
        });
    </script>
    <!-- script for downloading the data according to the month -->
    <script>
      // for downloading the pdf
      document
        .getElementById("downloadPdfBtnMonth")
        .addEventListener("click", function () {
          var selectedMonth = document.getElementById("month").value;
          var pdfUrl = "/admin/monthlyReportPDF?month=" + selectedMonth;
          window.location.href = pdfUrl;
        });
      // for downloading the excel sheet
      document
        .getElementById("downloadXLSBtnMonth")
        .addEventListener("click", function () {
          var selectedMonth = document.getElementById("month").value;
          var pdfUrl = "/admin/monthlyReportXLS?month=" + selectedMonth;
          window.location.href = pdfUrl;
        });
    </script>

    <!-- script for downloading the data according to the date -->
    <script>
      // for downloading the pdf
      document
        .getElementById("downloadPdfBtnDate")
        .addEventListener("click", function () {
          var selectedDate = document.getElementById("date").value;
          var pdfUrl = "/admin/dailyReportPDF?date=" + selectedDate;
          window.location.href = pdfUrl;
        });

      // for downloading the excel sheet for the project
      document
        .getElementById("downloadXLSBtnDate")
        .addEventListener("click", function () {
          var selectedDate = document.getElementById("date").value;
          var pdfUrl = "/admin/dailyReportXLS?date=" + selectedDate;
          window.location.href = pdfUrl;
        });
    </script>

    <script>
      $(document).ready(function () {
        const loader = $("#loader");
        const dimmedBackground = $("#dimmedBackground");

        // Show the loader and dimmed background
        loader.show();
        dimmedBackground.show();

        // After 2 seconds (adjust this delay as needed), hide the loader and dimmed background
        setTimeout(function () {
          loader.hide();
          dimmedBackground.hide();
        }, 1000); // 2 seconds
      });
    </script>
  </body>
</html>
