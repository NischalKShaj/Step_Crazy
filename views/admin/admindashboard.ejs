<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Step-Crazy/Admindashboard</title>
  </head>
  <link rel="stylesheet" href="../../CSS/admin/style.css">
  <link rel="stylesheet" href="../.../CSS/admin/bootstrap.min.css">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
    crossorigin="anonymous"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/css/bootstrap-utilities.rtl.min.css"
    integrity="sha512-g/9zc34RrAHk9cSFEodVsDR+TjDAhw9+VjWHnbK6kZe6sK4xTpPJ6cqJYd3WXfFmQuNLIkhDetQdm6fOOzj/nQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <style>
    .dimmed-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5); /* Adjust the opacity as needed */
      display: none;
      z-index: 999;
    }
  
    .loader {
      border: 8px solid #f3f3f3; /* Light gray */
      border-top: 8px solid #3498db; /* Blue */
      border-radius: 50%;
      width: 40px;
      height: 40px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1000;
      display: none;
      animation: spin 2s linear infinite;
    }
  
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  <body>
    <div class="dimmed-background" id="dimmedBackground"></div>
    <div class="loader" id="loader"></div>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a href="/admin/dashboard">
          <img
            src="../../Img/product/logo.png"
            alt="logo"
            class="img-fluid w-25"
        /></a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a
              class="nav-link active"
              aria-current="page"
              href="/admin/dashboard"
              >Dashboard</a
            >
            <a
              class="nav-link active"
              aria-current="page"
              href="/admin/dashboard/admins"
              >Admins</a
            >
            <a
              class="nav-link active"
              aria-current="page"
              href="/admin/dashboard/user"
              >Users</a
            >
            <a
              class="nav-link active"
              aria-current="page"
              href="/admin/dashboard/product"
              >Product</a
            >
            <a
              class="nav-link active"
              aria-current="page"
              href="/admin/dashboard/category"
              >Category</a
            >
            <a
              class="nav-link active"
              aria-current="page"
              href="/admin/dashboard/coupon"
              >Coupons</a
            >

            <a href="/admin/logout">
              <button class="btn btn-danger">
                <i class="fas fa-sign-out-alt"></i> Logout
              </button>
            </a>
          </div>
        </div>
      </div>
    </nav>
    <h1>welcome to the admin panel</h1>
    <div class="container-fluid pt-4 px-4">
      <div class="row g-4">
        
        <!-- Yearly Sales Report -->
        <div class="col-sm-12 col-xl-6">
          <div class="bg-light rounded h-100 p-4">
            <h6 class="mb-4">Yearly Sales Report</h6>
            <canvas id="bar-chart-yearly" data-years="<%= JSON.stringify(years) %>" data-yearly-counts="<%= JSON.stringify(count) %>"></canvas>
            <button id="showTotalButton" class="btn btn-primary">Download Pdf</button>
            <button id="showAverageButton" class="btn btn-success">Download XL Sheet</button>
          </div>
        </div>
        
        <!-- Monthly Sales Report -->
        <div class="col-sm-12 col-xl-6">
          <div class="bg-light rounded h-100 p-4">
            <h6 class="mb-4">Monthly Sales Report</h6>
            <canvas id="bar-chart" data-months="<%= JSON.stringify(months) %>" data-counts="<%= JSON.stringify(counts) %>"></canvas>
            <button id="showTotalButton" class="btn btn-primary">Download Pdf</button>
            <button id="showAverageButton" class="btn btn-success">Download XL Sheet</button>
          </div>
        </div>
        

        
        <div class="col-sm-12 col-xl-6">
          <div class="bg-light rounded h-100 p-4">
            <h6 class="mb-4">Multiple Line Chart</h6>
            <canvas id="salse-revenue"></canvas>
          </div>
        </div>

        <div class="col-sm-12 col-xl-6">
          <div class="bg-light rounded h-100 p-4">
            <h6 class="mb-4">Multiple Bar Chart</h6>
            <canvas id="worldwide-sales"></canvas>
          </div>
        </div>
        
       
        
      </div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="../../js/chart.min.js"></script>
  <script>
    src =
      "https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.2/js/bootstrap.bundle.min.js";
    integrity =
      "sha512-X/YkDZyjTf4wyc2Vy16YGCPHwAY8rZJY+POgokZjQB2mhIRFJCckEGc6YyX9eNsPfn0PzThEuNs+uaomE5CO6A==";
    crossorigin = "anonymous";
    referrerpolicy = "no-referrer";
  </script>
  <script>
    const Logout = document.getElementById("logout");

    Logout.addEventListener("click", () => {
      fetch("/admin/logout", {
        method: "post",
      })
        .then((response) => {
          if (response.ok) {
            window.location.href = "/admin";
            console.log("The admin is successfully logged out");
          } else {
            console.log("Admin not properly logged out");
          }
        })
        .catch((error) => {
          console.error("Network error", error);
        });
    });
  </script>
 
 <!-- script for monthly sales -->
 <script>
  document.addEventListener("DOMContentLoaded", function () {
    const canvas = document.getElementById('bar-chart');
    const months = JSON.parse(canvas.getAttribute('data-months'));
    const counts = JSON.parse(canvas.getAttribute('data-counts'));

    // Data for the Bar Chart
    var data = {
      labels: [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
      ],
      datasets: [{
        label: 'Monthly Report',
        data: Array(12).fill(0),  // Initialize an array with zeros for all months
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        borderColor: 'rgba(75, 192, 192, 1)',
        borderWidth: 1,
        barPercentage: 0.5
      }]
    };

    // Update the data with actual counts for each month
    months.forEach((month, index) => {
      const monthIndex = data.labels.indexOf(month);
      if (monthIndex !== -1) {
        data.datasets[0].data[monthIndex] = counts[index];
      }
    });

    // Configuration options
    var options = {
      scales: {
        y: {
          beginAtZero: true,
          max: Math.max(...counts) * 2 // Set the maximum value of the y-axis
        }
      }
    };

    // Get the canvas element
    var ctx = canvas.getContext('2d');

    // Create the Bar Chart
    var barChart = new Chart(ctx, {
      type: 'bar',
      data: data,
      options: options
    });
  });
</script>




<!-- script for yearly sales -->

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const canvasYearly = document.getElementById('bar-chart-yearly');
    const years = JSON.parse(canvasYearly.getAttribute('data-years'));
    const yearlyCounts = JSON.parse(canvasYearly.getAttribute('data-yearly-counts'));

    // Predefined array of years
    const allYears = [2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029];

    // Data for the Yearly Bar Chart
    var dataYearly = {
      labels: allYears.map(String), // Convert years to strings
      datasets: [{
        label: 'Yearly Report',
        data: allYears.map(year => yearlyCounts[years.indexOf(year)] || 0), // Match the counts to the predefined years
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        borderColor: 'rgba(75, 192, 192, 1)',
        borderWidth: 1,
        barPercentage: 0.5
      }]
    };

    // Configuration options for Yearly Bar Chart
    var optionsYearly = {
      scales: {
        y: {
          beginAtZero: true,
          max: Math.max(...yearlyCounts) * 2
        }
      }
    };

    // Get the canvas element for Yearly Bar Chart
    var ctxYearly = canvasYearly.getContext('2d');

    // Create the Yearly Bar Chart
    var barChartYearly = new Chart(ctxYearly, {
      type: 'bar',
      data: dataYearly,
      options: optionsYearly
    });
  });
</script>


 <script>
  document.addEventListener("DOMContentLoaded", function () {
     // Data for the multiple line chart
     var data = {
        labels: ['Label 1', 'Label 2', 'Label 3', 'Label 4', 'Label 5'],
        datasets: [
           {
              label: 'Line 1',
              data: [10, 20, 15, 25, 18],
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 2,
              fill: false
           },
           {
              label: 'Line 2',
              data: [5, 10, 8, 15, 12],
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 2,
              fill: false
           }
           // Add more datasets as needed
        ]
     };

     // Configuration options
     var options = {
        scales: {
           y: {
              beginAtZero: true
           }
        }
     };

     // Get the canvas element
     var ctx = document.getElementById('salse-revenue').getContext('2d');

     // Create the multiple line chart
     var lineChart = new Chart(ctx, {
        type: 'line',
        data: data,
        options: options
     });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
     // Data for the multiple bar chart
     var data = {
        labels: ['Label 1', 'Label 2', 'Label 3', 'Label 4', 'Label 5'],
        datasets: [
           {
              label: 'Bar 1',
              data: [10, 20, 15, 25, 18],
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1
           },
           {
              label: 'Bar 2',
              data: [5, 10, 8, 15, 12],
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
           },
           {
              label: 'Bar 2',
              data: [5, 10, 8, 15, 12],
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
           }
           // Add more datasets as needed
        ]
     };

     // Configuration options
     var options = {
        scales: {
           y: {
              beginAtZero: true
           }
        }
     };

     // Get the canvas element
     var ctx = document.getElementById('worldwide-sales').getContext('2d');

     // Create the multiple bar chart
     var barChart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: options
     });
  });
</script>


  <script>
    $(document).ready(function() {
      const loader = $('#loader');
      const dimmedBackground = $('#dimmedBackground');
  
      // Show the loader and dimmed background
      loader.show();
      dimmedBackground.show();
  
      // After 2 seconds (adjust this delay as needed), hide the loader and dimmed background
      setTimeout(function() {
        loader.hide();
        dimmedBackground.hide();
      }, 1000); // 2 seconds
    });
  </script>
</html>
